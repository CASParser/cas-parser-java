// File generated from our OpenAPI spec by Stainless.

package com.cas_parser.api.models.contractnote

import com.cas_parser.api.core.jsonMapper
import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import java.time.LocalDate
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class ContractNoteParseResponseTest {

    @Test
    fun create() {
        val contractNoteParseResponse =
            ContractNoteParseResponse.builder()
                .data(
                    ContractNoteParseResponse.Data.builder()
                        .brokerInfo(
                            ContractNoteParseResponse.Data.BrokerInfo.builder()
                                .brokerType(
                                    ContractNoteParseResponse.Data.BrokerInfo.BrokerType.ZERODHA
                                )
                                .name("Zerodha Broking Limited")
                                .sebiRegistration("INZ000031633")
                                .build()
                        )
                        .chargesSummary(
                            ContractNoteParseResponse.Data.ChargesSummary.builder()
                                .cgst(0.0f)
                                .exchangeTransactionCharges(0.0f)
                                .igst(0.0f)
                                .netAmountReceivablePayable(0.0f)
                                .payInPayOutObligation(0.0f)
                                .sebiTurnoverFees(0.0f)
                                .securitiesTransactionTax(0.0f)
                                .sgst(0.0f)
                                .stampDuty(0.0f)
                                .taxableValueBrokerage(0.0f)
                                .build()
                        )
                        .clientInfo(
                            ContractNoteParseResponse.Data.ClientInfo.builder()
                                .address("address")
                                .gstStateCode("7")
                                .name("VIRENDER KUMAR")
                                .pan("FAXAK2545F")
                                .placeOfSupply("DELHI")
                                .ucc("YS3654")
                                .build()
                        )
                        .contractNoteInfo(
                            ContractNoteParseResponse.Data.ContractNoteInfo.builder()
                                .contractNoteNumber("CNT-25/26-73436720")
                                .settlementDate(LocalDate.parse("2025-08-06"))
                                .settlementNumber("2025149")
                                .tradeDate(LocalDate.parse("2025-08-05"))
                                .build()
                        )
                        .addDerivativesTransaction(
                            ContractNoteParseResponse.Data.DerivativesTransaction.builder()
                                .brokeragePerUnit(0.0f)
                                .buySellBfCf("B")
                                .closingRatePerUnit(0.0f)
                                .contractDescription("NIFTY24802410DPE")
                                .netTotal(0.0f)
                                .quantity(0.0f)
                                .wapPerUnit(0.0f)
                                .build()
                        )
                        .addDetailedTrade(
                            ContractNoteParseResponse.Data.DetailedTrade.builder()
                                .brokerage(0.0f)
                                .buySell("B")
                                .closingRatePerUnit(0.0f)
                                .exchange("NSE")
                                .netRatePerUnit(0.0f)
                                .netTotal(0.0f)
                                .orderNumber("1000000042939390")
                                .orderTime("13:13:13")
                                .quantity(0.0f)
                                .remarks("remarks")
                                .securityDescription("CASTROLIND-EQ/INE172A01027")
                                .tradeNumber("4006567")
                                .tradeTime("13:13:13")
                                .build()
                        )
                        .addEquityTransaction(
                            ContractNoteParseResponse.Data.EquityTransaction.builder()
                                .buyQuantity(0.0f)
                                .buyTotalValue(0.0f)
                                .buyWap(0.0f)
                                .isin("INE172A01027")
                                .netObligation(0.0f)
                                .securityName("CASTROLIND")
                                .securitySymbol("CASTROLIND")
                                .sellQuantity(0.0f)
                                .sellTotalValue(0.0f)
                                .sellWap(0.0f)
                                .build()
                        )
                        .build()
                )
                .msg("success")
                .status("success")
                .build()

        assertThat(contractNoteParseResponse.data())
            .contains(
                ContractNoteParseResponse.Data.builder()
                    .brokerInfo(
                        ContractNoteParseResponse.Data.BrokerInfo.builder()
                            .brokerType(
                                ContractNoteParseResponse.Data.BrokerInfo.BrokerType.ZERODHA
                            )
                            .name("Zerodha Broking Limited")
                            .sebiRegistration("INZ000031633")
                            .build()
                    )
                    .chargesSummary(
                        ContractNoteParseResponse.Data.ChargesSummary.builder()
                            .cgst(0.0f)
                            .exchangeTransactionCharges(0.0f)
                            .igst(0.0f)
                            .netAmountReceivablePayable(0.0f)
                            .payInPayOutObligation(0.0f)
                            .sebiTurnoverFees(0.0f)
                            .securitiesTransactionTax(0.0f)
                            .sgst(0.0f)
                            .stampDuty(0.0f)
                            .taxableValueBrokerage(0.0f)
                            .build()
                    )
                    .clientInfo(
                        ContractNoteParseResponse.Data.ClientInfo.builder()
                            .address("address")
                            .gstStateCode("7")
                            .name("VIRENDER KUMAR")
                            .pan("FAXAK2545F")
                            .placeOfSupply("DELHI")
                            .ucc("YS3654")
                            .build()
                    )
                    .contractNoteInfo(
                        ContractNoteParseResponse.Data.ContractNoteInfo.builder()
                            .contractNoteNumber("CNT-25/26-73436720")
                            .settlementDate(LocalDate.parse("2025-08-06"))
                            .settlementNumber("2025149")
                            .tradeDate(LocalDate.parse("2025-08-05"))
                            .build()
                    )
                    .addDerivativesTransaction(
                        ContractNoteParseResponse.Data.DerivativesTransaction.builder()
                            .brokeragePerUnit(0.0f)
                            .buySellBfCf("B")
                            .closingRatePerUnit(0.0f)
                            .contractDescription("NIFTY24802410DPE")
                            .netTotal(0.0f)
                            .quantity(0.0f)
                            .wapPerUnit(0.0f)
                            .build()
                    )
                    .addDetailedTrade(
                        ContractNoteParseResponse.Data.DetailedTrade.builder()
                            .brokerage(0.0f)
                            .buySell("B")
                            .closingRatePerUnit(0.0f)
                            .exchange("NSE")
                            .netRatePerUnit(0.0f)
                            .netTotal(0.0f)
                            .orderNumber("1000000042939390")
                            .orderTime("13:13:13")
                            .quantity(0.0f)
                            .remarks("remarks")
                            .securityDescription("CASTROLIND-EQ/INE172A01027")
                            .tradeNumber("4006567")
                            .tradeTime("13:13:13")
                            .build()
                    )
                    .addEquityTransaction(
                        ContractNoteParseResponse.Data.EquityTransaction.builder()
                            .buyQuantity(0.0f)
                            .buyTotalValue(0.0f)
                            .buyWap(0.0f)
                            .isin("INE172A01027")
                            .netObligation(0.0f)
                            .securityName("CASTROLIND")
                            .securitySymbol("CASTROLIND")
                            .sellQuantity(0.0f)
                            .sellTotalValue(0.0f)
                            .sellWap(0.0f)
                            .build()
                    )
                    .build()
            )
        assertThat(contractNoteParseResponse.msg()).contains("success")
        assertThat(contractNoteParseResponse.status()).contains("success")
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val contractNoteParseResponse =
            ContractNoteParseResponse.builder()
                .data(
                    ContractNoteParseResponse.Data.builder()
                        .brokerInfo(
                            ContractNoteParseResponse.Data.BrokerInfo.builder()
                                .brokerType(
                                    ContractNoteParseResponse.Data.BrokerInfo.BrokerType.ZERODHA
                                )
                                .name("Zerodha Broking Limited")
                                .sebiRegistration("INZ000031633")
                                .build()
                        )
                        .chargesSummary(
                            ContractNoteParseResponse.Data.ChargesSummary.builder()
                                .cgst(0.0f)
                                .exchangeTransactionCharges(0.0f)
                                .igst(0.0f)
                                .netAmountReceivablePayable(0.0f)
                                .payInPayOutObligation(0.0f)
                                .sebiTurnoverFees(0.0f)
                                .securitiesTransactionTax(0.0f)
                                .sgst(0.0f)
                                .stampDuty(0.0f)
                                .taxableValueBrokerage(0.0f)
                                .build()
                        )
                        .clientInfo(
                            ContractNoteParseResponse.Data.ClientInfo.builder()
                                .address("address")
                                .gstStateCode("7")
                                .name("VIRENDER KUMAR")
                                .pan("FAXAK2545F")
                                .placeOfSupply("DELHI")
                                .ucc("YS3654")
                                .build()
                        )
                        .contractNoteInfo(
                            ContractNoteParseResponse.Data.ContractNoteInfo.builder()
                                .contractNoteNumber("CNT-25/26-73436720")
                                .settlementDate(LocalDate.parse("2025-08-06"))
                                .settlementNumber("2025149")
                                .tradeDate(LocalDate.parse("2025-08-05"))
                                .build()
                        )
                        .addDerivativesTransaction(
                            ContractNoteParseResponse.Data.DerivativesTransaction.builder()
                                .brokeragePerUnit(0.0f)
                                .buySellBfCf("B")
                                .closingRatePerUnit(0.0f)
                                .contractDescription("NIFTY24802410DPE")
                                .netTotal(0.0f)
                                .quantity(0.0f)
                                .wapPerUnit(0.0f)
                                .build()
                        )
                        .addDetailedTrade(
                            ContractNoteParseResponse.Data.DetailedTrade.builder()
                                .brokerage(0.0f)
                                .buySell("B")
                                .closingRatePerUnit(0.0f)
                                .exchange("NSE")
                                .netRatePerUnit(0.0f)
                                .netTotal(0.0f)
                                .orderNumber("1000000042939390")
                                .orderTime("13:13:13")
                                .quantity(0.0f)
                                .remarks("remarks")
                                .securityDescription("CASTROLIND-EQ/INE172A01027")
                                .tradeNumber("4006567")
                                .tradeTime("13:13:13")
                                .build()
                        )
                        .addEquityTransaction(
                            ContractNoteParseResponse.Data.EquityTransaction.builder()
                                .buyQuantity(0.0f)
                                .buyTotalValue(0.0f)
                                .buyWap(0.0f)
                                .isin("INE172A01027")
                                .netObligation(0.0f)
                                .securityName("CASTROLIND")
                                .securitySymbol("CASTROLIND")
                                .sellQuantity(0.0f)
                                .sellTotalValue(0.0f)
                                .sellWap(0.0f)
                                .build()
                        )
                        .build()
                )
                .msg("success")
                .status("success")
                .build()

        val roundtrippedContractNoteParseResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(contractNoteParseResponse),
                jacksonTypeRef<ContractNoteParseResponse>(),
            )

        assertThat(roundtrippedContractNoteParseResponse).isEqualTo(contractNoteParseResponse)
    }
}
